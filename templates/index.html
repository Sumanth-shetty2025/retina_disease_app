<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Retina Disease Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="card">
        <h1 style="text-align:center;">ü©∫ Retina Disease Classifier</h1>
        
        {% if model_error %}
        <div class="error-box">
            <h2>‚ö†Ô∏è CRITICAL ERROR: Model Not Loaded</h2>
            <p>Please check the terminal output for the exact error. Ensure <code>EfficientNetB0_ODIR_OfflineAug.h5</code> is correctly named and located.</p>
        </div>
        {% else %}

        {% if error_message %}
        <div class="error-box">
            <h2>‚ö†Ô∏è Input Error</h2>
            <p>{{ error_message }}</p>
            <p><a href="{{ url_for('index') }}" class="btn-secondary">Try Again</a></p>
        </div>
        {% endif %}

        <p class="note"><strong class="highlight-text">Drag & Drop an image here</strong>, upload a file, or paste a link below.</p>

        <form action="{{ url_for('predict') }}" method="post" enctype="multipart/form-data" id="prediction-form">
            <div class="upload-section">

                <div class="upload-controls">
                    <label class="button" for="file"><span class="fas fa-folder-open"></span> Choose File</label>
                    
                    <input id="file" type="file" name="file" onchange="setFileName(this)">
                    
                    <span id="file-name">No file chosen</span>

                    <button type="submit" class="predict"><span class="fas fa-search"></span> Predict</button>
                </div>

                <div class="url-input-group">
                    <p style="margin-bottom: 5px; font-size: 14px; text-align: center;">OR paste a direct image URL (e.g., ending in .jpg, .png)</p>
                    <input type="text" id="image_url" name="image_url" placeholder="Paste image URL here..." onkeyup="setFileName(this)">
                    <p id="url-error" style="display:none;"></p> 
                </div>
            </div>
        </form>
        {% endif %}
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>